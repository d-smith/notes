# Cross Chain Interoperability Protocol (CCIP)

[Home](https://chain.link/cross-chain)
[Developer Hub](https://dev.chain.link/)
[Examples](https://docs.chain.link/ccip/examples)


Generating keys... take the seed from go-chain seed and plug into anvil, e.g.

anvil -m "adjust possible truth before safe hole fault dynamic whisper struggle movie clever"

Endpoint URLs - used alchemy endpoints

forge script ./script/Faucet.s.sol -vvv --broadcast --rpc-url polygonMumbai --sig "run(uint8)" -- 4

Link contract addresses - see [here](https://docs.chain.link/resources/link-token-contracts)


Example 1 - mumbai to sepolia

forge script ./script/Example01.s.sol -vvv --broadcast --rpc-url polygonMumbai --sig "run(uint8,uint8,address,address,uint256,uint8)" -- 4 0 0x526B4f874B57222CF9B60442Bd648727D8DbB086  0x326C977E6efc84E512bB9C30f76E30c160eD06FB 100 1

Strange error - do the examples work?

forge script ./script/Faucet.s.sol -vvv --broadcast --rpc-url ethereumSepolia --sig "run(uint8)" -- 0

forge script ./script/Example01.s.sol -vvv --broadcast --rpc-url avalancheFuji --sig "run(uint8,uint8,address,address,uint256,uint8)" -- 2 0 0x526B4f874B57222CF9B60442Bd648727D8DbB086 0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4 100 1


Even running examples straight from the box errors out:

```
$ forge script ./script/Example01.s.sol -vvv --broadcast --rpc-url avalancheFuji --sig "run(uint8,uint8,address,address,uint256,uint8)" -- 2 0 0x526B4f874B57222CF9B60442Bd648727D8DbB086 0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4 100 1
[⠒] Compiling...
No files changed, compilation skipped
Traces:
  [899354] → new CCIPTokenTransfer@0x5b73C5498c1E3b4dbA84de0F1833c4a029d90519
    └─ ← 3481 bytes of code

  [8937393460516754204] CCIPTokenTransfer::run(2, 0, 0x526B4f874B57222CF9B60442Bd648727D8DbB086, 0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4, 100, 1)
    ├─ [0] VM::envUint(PRIVATE_KEY) [staticcall]
    │   └─ ← <env var value>
    ├─ [0] VM::startBroadcast(<pk>)
    │   └─ ← ()
    ├─ [24698] 0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4::approve(0xF694E193200268f9a4868e4Aa017A0118C9a8177, 100)
    │   ├─ emit Approval(param0: 0x526B4f874B57222CF9B60442Bd648727D8DbB086, param1: 0xF694E193200268f9a4868e4Aa017A0118C9a8177, param2: 100)
    │   └─ ← 0x0000000000000000000000000000000000000000000000000000000000000001
    ├─ [38579] 0xF694E193200268f9a4868e4Aa017A0118C9a8177::getFee(16015286601757825753 [1.601e19], (0x000000000000000000000000526b4f874b57222cf9b60442bd648727d8dbb086, 0x, [(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4, 100)], 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 0x97a657c90000000000000000000000000000000000000000000000000000000000000000)) [staticcall]
    │   ├─ [29540] 0x5724B4Cc39a9690135F7273b44Dfd3BA6c0c69aD::getFee(16015286601757825753 [1.601e19], (0x000000000000000000000000526b4f874b57222cf9b60442bd648727d8dbb086, 0x, [(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4, 100)], 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 0x97a657c90000000000000000000000000000000000000000000000000000000000000000)) [staticcall]
    │   │   ├─ [5528] 0x19e157E5fb1DAec1aE4BaB113fdf077F980704AA::getTokenAndGasPrices(0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 16015286601757825753 [1.601e19]) [staticcall]
    │   │   │   └─ ← 0x0000000000000000000000000000000000000000000000008ac7230489e8000000000000000000000000000000000000000000000000000000000086d4b6be98
    │   │   ├─ [2893] 0x19e157E5fb1DAec1aE4BaB113fdf077F980704AA::getValidatedTokenPrice(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4) [staticcall]
    │   │   │   └─ ← 0x0000000000000000000000000000000000000000000000000000000005f5e100
    │   │   └─ ← 0x0000000000000000000000000000000000000000000000000027c594f4742e50
    │   └─ ← 0x0000000000000000000000000000000000000000000000000027c594f4742e50
    ├─ [24716] 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846::approve(0xF694E193200268f9a4868e4Aa017A0118C9a8177, 11194767638802000 [1.119e16])
    │   ├─ emit Approval(param0: 0x526B4f874B57222CF9B60442Bd648727D8DbB086, param1: 0xF694E193200268f9a4868e4Aa017A0118C9a8177, param2: 11194767638802000 [1.119e16])
    │   └─ ← 0x0000000000000000000000000000000000000000000000000000000000000001
    ├─ [8937393460516627255] 0xF694E193200268f9a4868e4Aa017A0118C9a8177::ccipSend(16015286601757825753 [1.601e19], (0x000000000000000000000000526b4f874b57222cf9b60442bd648727d8dbb086, 0x, [(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4, 100)], 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 0x97a657c90000000000000000000000000000000000000000000000000000000000000000))
    │   ├─ [7456] 0xAc8CFc3762a979628334a0E4C1026244498E821b::isCursed() [staticcall]
    │   │   ├─ [2394] 0x0ea0D7B2b78DD3A926fC76d6875a287F0AEB158F::isCursed()
    │   │   │   └─ ← 0x0000000000000000000000000000000000000000000000000000000000000000
    │   │   └─ ← 0x0000000000000000000000000000000000000000000000000000000000000000
    │   ├─ [11040] 0x5724B4Cc39a9690135F7273b44Dfd3BA6c0c69aD::getFee(16015286601757825753 [1.601e19], (0x000000000000000000000000526b4f874b57222cf9b60442bd648727d8dbb086, 0x, [(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4, 100)], 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 0x97a657c90000000000000000000000000000000000000000000000000000000000000000)) [staticcall]
    │   │   ├─ [1528] 0x19e157E5fb1DAec1aE4BaB113fdf077F980704AA::getTokenAndGasPrices(0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846, 16015286601757825753 [1.601e19]) [staticcall]
    │   │   │   └─ ← 0x0000000000000000000000000000000000000000000000008ac7230489e8000000000000000000000000000000000000000000000000000000000086d4b6be98
    │   │   ├─ [893] 0x19e157E5fb1DAec1aE4BaB113fdf077F980704AA::getValidatedTokenPrice(0xD21341536c5cF5EB1bcb58f6723cE26e8D8E90e4) [staticcall]
    │   │   │   └─ ← 0x0000000000000000000000000000000000000000000000000000000005f5e100
    │   │   └─ ← 0x0000000000000000000000000000000000000000000000000027c594f4742e50
    │   ├─ [3079] 0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846::transferFrom(0x526B4f874B57222CF9B60442Bd648727D8DbB086, 0x5724B4Cc39a9690135F7273b44Dfd3BA6c0c69aD, 11194767638802000 [1.119e16])
    │   │   └─ ← "EvmError: InvalidFEOpcode"
    │   └─ ← "SafeERC20: low-level call failed"
    └─ ← "SafeERC20: low-level call failed"


Error:
SafeERC20: low-level call failed
```